language: node_js
node_js:
  - '8'

install:
  - npm ci

before_script:
  - npm run build

script:
  - npm test

deploy:
  - provider: script
    script: npm run deploy --stage dev
    on:
      branch: dev

  - provider: script
    script: npm run deploy --stage prod
    on:
      branch: master
